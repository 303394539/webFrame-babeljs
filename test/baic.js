'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj;};console.time('core');;(function(global,factory){if((typeof module==='undefined'?'undefined':_typeof(module))==="object"&&_typeof(module.exports)==="object"){module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("Baic requires a window with a document");}return factory(w);};}else{factory(global);}})(typeof window!=="undefined"?window:undefined,function(window,noGlobal){var document=window.document,OBJECT_PROTOTYPE=Object.prototype,ARRAY_PROTOTYPE=Array.prototype,FUNCTION_PROTOTYPE=Function.prototype,STRING_PROTOTYPE=String.prototype,NUMBER_PROTOTYPE=Number.prototype,EXP_TYPE=/\s([a-z|A-Z]+)/,Baic=function Baic(selector,children){return _init(selector,children);};function _init(selector,children){if(!selector){return B();}else if(selector.isB&&Baic.isUndefined(children)){return selector;}else if(Baic.isFunction(selector)){Baic.ready(selector);}else{return B(Baic.getDOMObject(selector,children),selector);}}var B=function B(dom,selector){dom=dom||[];dom.__proto__=B.prototype;dom.selector=selector||"";return dom;};Baic.fn=B.prototype={isB:true,version:"1.0.0",constructor:Baic,selector:"",length:0,indexOf:ARRAY_PROTOTYPE.indexOf,forEach:ARRAY_PROTOTYPE.forEach,map:ARRAY_PROTOTYPE.map,filter:ARRAY_PROTOTYPE.filter};Baic.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++;}if((typeof target==='undefined'?'undefined':_typeof(target))!=="object"&&!Baic.isFunction(target)){target={};}if(i===length){target=this;i--;}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}if(deep&&copy&&(Baic.isPlainObject(copy)||(copyIsArray=Baic.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&Baic.isArray(src)?src:[];}else{clone=src&&Baic.isPlainObject(src)?src:{};}target[name]=Baic.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}return target;};Baic.extend(OBJECT_PROTOTYPE,{forEach:function forEach(fn,scope){if(Baic.isArray(this)){ARRAY_PROTOTYPE.forEach.apply(this,arguments);}else{for(var key in this){if(Baic.hasOwn(this,key)){fn.call(scope,this[key],key,this);}}}},map:function map(fn,scope){if(Baic.isArray(this)){return ARRAY_PROTOTYPE.map.apply(this,arguments);}else{var result={};this.forEach(function(value,key,object){result[key]=fn.call(scope,value,key,object);});return result;}},toArray:function toArray(begin,end){return ARRAY_PROTOTYPE.slice.call(this,begin,end);},toStr:function toStr(type){try{return Baic.isString(this)?this:this===true?"yes":this===false?"no":JSON.stringify(this);}catch(e){return this;}},flatten:function flatten(){return this.length?[].concat.apply([],this):this;},getGlobalVariable:function getGlobalVariable(){var self=this;var iframe=document.createElement('iframe');iframe.style.display="none";iframe.onload=function(){var iframeKeys=Object.keys(iframe.contentWindow);var keys=[];Object.keys(self).forEach(function(key){if(!(key in iframeKeys)){keys.push(key);}});iframe.remove();self.__globalVariable__=keys;};iframe.src='about:blank';document.body.appendChild(iframe);return self.__globalVariable__;}});Baic.extend({nop:function nop(){},nopp:function nopp(){return new Promise(Baic.nop);},hasOwn:function hasOwn(object,property){return OBJECT_PROTOTYPE.hasOwnProperty.call(object,property);},type:function type(obj){return OBJECT_PROTOTYPE.toString.call(obj).match(EXP_TYPE)[1].toLowerCase();},isFunction:_checktype("function"),isString:_checktype("string"),isBoolean:_checktype("boolean"),isArray:Array.isArray,isNumber:_checktype("number",function(obj){return!isNaN(obj);}),isNull:_checktype("null"),isWindow:function isWindow(obj){return obj!=null&&obj===obj.window;},isUndefined:_checktype("undefined"),isObject:_checktype("object"),isPlainObject:function isPlainObject(obj){if(Baic.type(obj)!=="object"||obj.nodeType||Baic.isWindow(obj)){return false;}if(obj.constructor&&!Baic.hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false;}return true;},isJSON:function isJSON(obj){return Baic.isObject(obj)&&!obj.length;},parseJSON:function parseJSON(obj){return JSON.parse(obj+"");},getWindow:function getWindow(obj){return Baic.isWindow(obj)?obj:obj.nodeType===9&&obj.defaultView;},ready:function ready(callback){if(!Baic.isFunction(callback))return;if(/complete|loaded|interactive/.test(document.readyState)&&document.body)callback(Baic);else document.addEventListener('DOMContentLoaded',function(){callback(Baic);},false);},random:function random(min,max){var rand=Math.floor(min+Math.random()*(max-min));rand=isNaN(rand)?function(a,b){!Baic.isUndefined(b)||(b=a,a=0);var c=b-a,e=Math.random();return a+e*c|0;}(min||9999999):rand;return rand;}});function _checktype(type){var args=arguments.toArray(1);return function(obj){var bool=true;if(args.length)args.forEach(function(item){if(!bool)return;if(Baic.isFunction(item)){bool=item(obj);}else{bool=item;}});return Baic.type(obj)===type&&bool;};}Baic.extend(FUNCTION_PROTOTYPE,{bind:function bind(scope){var _arguments=arguments;var method=this;var args=arguments.toArray(1);return function(){return method.apply(scope,args.concat(_arguments.toArray()));};},defer:function defer(){return this._job=setTimeout.apply(null,[this].concat(arguments.toArray()));},cycle:function cycle(){return this._cycle=setInterval.apply(null,[this].concat(arguments.toArray()));},cancel:function cancel(type){type=type||1;if(this._job&&type===1){clearTimeout(this._job);}else if(this._cycle&&type===2){clearInterval(this._cycle);}}});Baic.extend(STRING_PROTOTYPE,{parseJSON:function parseJSON(){return Baic.parseJSON(this);},firstUpperCase:function firstUpperCase(){return this.replace(/\b(\w)|\s(\w)/g,function(m){return m.toUpperCase();});},firstLowerCase:function firstLowerCase(){return this.replace(/\b(\w)|\s(\w)/g,function(m){return m.toLowerCase();});},trim:function trim(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");}});var _add=function _add(arg1,arg2){arg1=arg1||0;arg2=arg2||0;var r1,r2,m,c;try{r1=arg1.toString().split(".")[1].length;}catch(e){r1=0;}try{r2=arg2.toString().split(".")[1].length;}catch(e){r2=0;}c=Math.abs(r1-r2);m=Math.pow(10,Math.max(r1,r2));if(c>0){var cm=Math.pow(10,c);if(r1>r2){arg1=Number(arg1.toString().replace(".",""));arg2=Number(arg2.toString().replace(".",""))*cm;}else{arg1=Number(arg1.toString().replace(".",""))*cm;arg2=Number(arg2.toString().replace(".",""));}}else{arg1=Number(arg1.toString().replace(".",""));arg2=Number(arg2.toString().replace(".",""));}return(arg1+arg2)/m;};var _sub=function _sub(arg1,arg2){arg1=arg1||0;arg2=arg2||0;var r1,r2,m,n;try{r1=arg1.toString().split(".")[1].length;}catch(e){r1=0;}try{r2=arg2.toString().split(".")[1].length;}catch(e){r2=0;}m=Math.pow(10,Math.max(r1,r2));//last modify by deeka //动态控制精度长度
n=r1>=r2?r1:r2;return((arg1*m-arg2*m)/m).toFixed(n);};var _mul=function _mul(arg1,arg2){arg1=arg1||0;arg2=arg2||0;var m=0,s1=arg1.toString(),s2=arg2.toString();try{m+=s1.split(".")[1].length;}catch(e){}try{m+=s2.split(".")[1].length;}catch(e){}return Number(s1.replace(".",""))*Number(s2.replace(".",""))/Math.pow(10,m);};var _div=function _div(arg1,arg2){arg1=arg1||0;arg2=arg2||0;var t1=0,t2=0,r1,r2;try{t1=arg1.toString().split(".")[1].length;}catch(e){}try{t2=arg2.toString().split(".")[1].length;}catch(e){}r1=Number(arg1.toString().replace(".",""));r2=Number(arg2.toString().replace(".",""));return r1/r2*Math.pow(10,t2-t1);};Baic.extend(Number,{add:function add(){return arguments.toArray().reduce(function(arg1,arg2){return _add(arg1,arg2);});},sub:function sub(){return arguments.toArray().reduce(function(arg1,arg2){return _sub(arg1,arg2);});},mul:function mul(){return arguments.toArray().reduce(function(arg1,arg2){return _mul(arg1,arg2);});},div:function div(arg1,arg2){return arguments.toArray().reduce(function(arg1,arg2){return _div(arg1,arg2);});}});Baic.extend(NUMBER_PROTOTYPE,{cancel:function cancel(type){type=type||1;if(this){if(type===1){clearTimeout(this);}else if(type===2){clearInterval(this);}}},add:function add(){return Number.add.apply(this,[].concat.apply(this,arguments.toArray()));},sub:function sub(){return Number.sub.apply(this,[].concat.apply(this,arguments.toArray()));},mul:function mul(){return Number.mul.apply(this,[].concat.apply(this,arguments.toArray()));},div:function div(){return Number.div.apply(this,[].concat.apply(this,arguments.toArray()));}});if(typeof define==="function"&&define.amd){define("Baic",[],function(){return Baic;});}if(typeof noGlobal==="undefined"){window.Baic=window.b=Baic;}if(typeof $==="undefined"){window.$=Baic;}return Baic;});console.timeEnd('core');console.time('dom');;(function(){'use strict';var EVENT_PREFIX=/^on[A-Z]/,ELEMENT_ID=1;Baic.extend(Baic.fn,{html:function html(value){if(Baic.isUndefined(value)){return this[0].innerHTML;}else{this.forEach(function(item){if(Baic.isString(value)||Baic.isNumber(value)){item.innerHTML=value;}else{item.innerHTML=null;if(Baic.isArray(value)){value.forEach(function(dom){if(dom.nodeType){item.appendChild(dom);}else{item.innerHTML=dom;}});}else{if(value.nodeType)item.appendChild(value);}}});}return this;},text:function text(value){if(Baic.isUndefined(value)){return this[0].textContent;}else{this.forEach(function(item){item.textContent=value.toStr();});}return this;},empty:function empty(){this.forEach(function(item){item.innerHTML=null;});return this;},remove:function remove(){this.forEach(function(item){item.remove();});},attr:function attr(name,value){var _this=this;if(Baic.isUndefined(value)){if(Baic.isString(name)){return this[0].getAttribute(name);}else if(Baic.isJSON(name)){name.forEach(function(v,k){_this.attr(k,v);}.bind(this));}}else{this.forEach(function(item){item.setAttribute(name,value.toStr());});}return this;},removeAttr:function removeAttr(name){var _this2=this;this.forEach(function(item){if(Baic.isArray(name)){name.forEach(function(value){_this2.removeAttr(value);}.bind(_this2));}else{item.removeAttribute(name);}}.bind(this));return this;},data:function data(name,value){//利用html5特性dataset,大量dom操作dataset性能不太好,限制在10个元素以内
if(this.length<=10&&this[0].dataset){if(Baic.isUndefined(value)){return this[0].dataset[name];}else{this.forEach(function(item){item.dataset[name]=value.toStr();});return this;}}else{return this.attr("data-"+name,value);}},removeDate:function removeDate(name){return this.removeAttr("data-"+name);},val:function val(value){if(Baic.isUndefined(value)){return this[0].value;}else{this.forEach(function(item){item.value=value.toStr();});}return this;},hasClass:function hasClass(name){return _hasClass(this[0],name);},addClass:function addClass(name){this.forEach(function(item){if(!_hasClass(item,name)){if(item.classList){item.classList.add(name);}else{item.className=(item.className+" "+name).trim();}}});return this;},removeClass:function removeClass(name){this.forEach(function(item){if(name==item.className){item.className="";}else{name=name.trim();if(_hasClass(item,name)){if(item.classList){item.classList.remove(name);}else{item.className=item.className.replace(new RegExp('^'+[name,name,name].join(' | ')+'$','g')," ").replace(/\s+/g," ").trim();}}}});return this;},css:function css(name,value){var _this3=this;if(Baic.isUndefined(value)){if(Baic.isJSON(name)){name.forEach(function(value,key){_this3.css(key,value);}.bind(this));}else{return this[0].style[name]||document.defaultView.getComputedStyle(this[0],'')[name];}}else{this.forEach(function(item){item.style[name]=value.toStr();});}return this;},vendor:function vendor(name,value,oppo){var len=Baic.VENDORS.length,newname,newvalue,vendor,result;for(var i=0;i<len;i++){vendor=Baic.VENDORS[i];newname=vendor+name;if(!Baic.isUndefined(value)&&!Baic.isNull(value)){if(!oppo){this.css(newname,value);}else{newvalue=vendor+value;this.css(name,newvalue);}}else if(result=this.css(newname)){return result;}};return this;},rect:function rect(){return this[0].getBoundingClientRect();},width:function width(){return this.rect().width;},height:function height(){return this.rect().height;},offset:function offset(){var rect=this.rect(),dom=this[0],doc=dom&&dom.ownerDocument;if(!doc)return;var docElem=doc.documentElement,win=Baic.getWindow(doc);return{left:rect.left+win.pageXOffset-docElem.clientLeft,top:rect.top+win.pageYOffset-docElem.clientTop,width:rect.width,height:rect.height};},append:_addElement(0),prepend:_addElement(1),replaceWith:_addElement(2),createElement:function createElement(obj){if(!obj)return null;this.append(_createElements(obj));return this;},createElementPrepend:function createElementPrepend(obj){if(!obj)return null;this.prepend(_createElements(obj));return this;},id:function id(index){return Baic.isNumber(index)&&index<this.length?this[0].id=Baic.id():this.map(function(item){return item.id||(item.id=Baic.id());});}});Baic.extend({VENDORS:function(){var styles=document.defaultView.getComputedStyle(document.documentElement,"")||window.getComputedStyle(document.documentElement,"")||"";if(!styles)return['-webkit-','-moz-','-ms-','-o-',''];var vendors=Array.prototype.slice.call(styles).join('').match(/-(moz|webkit|ms|o)-/);return Baic.isArray(vendors)?[""].concat(vendors[0]):styles.OLink===''&&['','o'];}(),createElements:_createElements,b:_createElements,createElementPrepend:function createElementPrepend(obj,parentNode){if(!obj||!parentNode)return null;return Baic(parentNode).createElementPrepend(obj);},id:function id(element,index){if(element&&element.nodeType){return element.id||(element.id=Baic.id());}else if(Baic.isArray(element)){return Baic.isNumber(index)&&index<this.length?this[0].id=Baic.id():this.map(function(item){return item.id||(item.id=Baic.id());});}else{return'__id_'+ELEMENT_ID++;}}});function _hasClass(dom,name){return dom.classList?dom.classList.contains(name):dom.className.split(/\s+/g).indexOf(name)>=0;}function _addElement(mode){var _this4=this;return function(value){var method=function method(item,value){switch(mode){case 0:item.appendChild(value);break;case 1:item.insertBefore(value,item.firstChild);break;case 2:item.parentNode.insertBefore(value,item);break;}};_this4.forEach(function(item){if(Baic.isString(value)||Baic.isNumber(value)){item.insertAdjacentHTML(mode?mode===2?'beforeBegin':'afterBegin':'beforeEnd',value);}else if(Baic.isArray(value)){value.forEach(function(value){method(item,value);});}else{method(item,value);}});if(mode===2){_this4.remove();}};}function _createElements(elements,parentNode){var nodes=[];var type=Baic.type(elements);var vendor=function vendor(property,value){return Baic.VENDORS.map(function(item){return item+property+':'+value;}).join(';');};if(type==='object'){elements=[elements];}else if(type!=='array'){return nodes;}elements.forEach(function(properties){if(properties){var element=document.createElement(properties.tag||'div');var styles=[];var property,value;for(property in properties){if(Baic.hasOwn(properties,property)){value=properties[property];switch(property){case'tag':case'components':break;case'style':styles.push(value);break;case'flex':styles.push(vendor('box-flex',value));break;case'text':element.textContent=value;break;case'html':element.innerHTML=value;break;case'classes':element.className=value;break;case'showing':styles.push('display:'+(value?'block':'none'));break;case'width':case'height':case'top':case'bottom':case'left':case'right':styles.push(property+':'+(Baic.isString(value)?value:+value+'px'));break;default:if(EVENT_PREFIX.test(property)&&Baic.isFunction(value)){Baic(element).on(property[2].toLowerCase()+property.slice(3),value);}else if(value!=null){element.setAttribute(property.replace(/[A-Z]/g,function(obj){return'-'+obj.toLowerCase();}),value.toStr());}}}}if(properties.components){_createElements(properties.components,element);}if(styles.length){element.style.cssText=styles.join(';');}nodes.push(element);}});return nodes;}})();console.timeEnd('dom');console.time('tpl');;(function(){'use strict';var _Tpl=Baic.nop;var FIRST_EXP=/\$\{\s*(.*?)\s*\}/g;var SECOND_EXP=/\$\(\s*(.*?)\s*\)/g;var THIRD_EXP=/\$\<\s*(.*?)\s*\>/g;var BOOLEAN_EXP=/^([\w\.]+)\s*(\?\s*([^:]*?))?\s*(\:\s*(.*))?$/;function _initTpl(context){context=context||Baic(document.body);var tpl=new _Tpl();_initTplHtml(tpl,context);return tpl;}function _parseStr(string,obj){function _getBooleanValue(str){var arr=str.match(BOOLEAN_EXP);var value=obj[arr[1]];return!arr[3]&&!arr[5]?value:value?arr[3]||"":arr[5]||"";}string=string.replace(FIRST_EXP,function(matched,str){str=str.replace(SECOND_EXP,function(matched,str){return _getBooleanValue(str).replace(THIRD_EXP,function(matched,str){return _getBooleanValue(str);});});return _getBooleanValue(str);});return string;}Baic.extend(_Tpl.prototype,{tplEventContainer:{},tplMap:{},on:function on(fnName,fn){if(Baic.isObject(fnName)){Baic.extend(this.tplEventContainer,fnName);}else{this.tplEventContainer[fnName]=fn;}},parse:function parse(name,obj){var html=name;if(name in this.tplMap&&Baic.hasOwn(this.tplMap,name)){html=this.tplMap[name]||"";}function _getBooleanValue(str){var arr=str.match(BOOLEAN_EXP);var value=obj[arr[1]];return!arr[3]&&!arr[5]?value:value?arr[3]||"":arr[5]||"";}html=html.replace(FIRST_EXP,function(matched,str){str=str.replace(SECOND_EXP,function(matched,str){return _getBooleanValue(str).replace(THIRD_EXP,function(matched,str){return _getBooleanValue(str);});});return _getBooleanValue(str);});return html;},create:function create(name,obj,parentNode){var html=this.parse(name,obj);html=html.replace(FIRST_EXP,"");var dom=Baic(html);dom.forEach(_process.bind(this));if(parentNode){if(!parentNode.isB){parentNode=Baic(parentNode);}parentNode.append(dom);}return dom;}});function _initTplHtml(tpl,context){context.find("[data-tpl]").forEach(function(item){var dom=Baic(item);tpl.tplMap[dom.data("tpl")]=dom.html().replace(/>\s+</g,'><').trim();dom.remove();});context.children().forEach(_process.bind(tpl));}function _process(el){var tpl=this;el=Baic(el);var eventName=el.attr('v-link-event');var link=el.attr("v-link");if(link){el.removeAttr("v-link");el.removeAttr("v-link-event");el.attr('tap-highlight','yes');var prefix=link.charAt(0);el.on(eventName||"singleTap",function(event){event.stopPropagation();if(prefix==="*"){var args=link.substring(1).split(/\s+/).map(function(a){return /%u[0-9a-f]{4}/i.test(a)?unescape(a):decodeURIComponent(a);});var name=args.shift();if(tpl.tplEventContainer[name]){tpl.tplEventContainer[name].apply(window,[event].concat(args));}}else{location.href=link;}});}el.children().forEach(_process.bind(tpl));}Baic.extend({tpl:_initTpl,parseStr:_parseStr});})();console.timeEnd('tpl');console.time('touch');;(function(){'use strict';var EVENT;var EVENT_ATTRIBUTE=['clientX','clientY','pageX','pageY','screenX','screenY','identifier','detail','which','rotation','scale'];var TOUCH_EVENTS=['tap','singleTap','doubleTap','longTap','dragStart','drag','drop','dragLeft','dragRight','dragUp','dragDown','zoom','zooming'];var EVENT_OPTIONS={singleDelay:250,longDelay:650,zoomDelay:10};var singleTapTimeout,longTapTimeout,touch={},firstTouch=[],lastTouch=[];TOUCH_EVENTS.forEach(function(eventName){Baic.fn[eventName]=function(callback){undefined.on(eventName,callback);};});Baic.extend({setEventOptions:function setEventOptions(opts){Baic.extend(EVENT_OPTIONS,opts,true);}});Baic(function(){Baic(document).on('touchstart',_onTouchStart).on('touchmove',_onTouchMove).on('touchend',_onTouchEnd).on('touchcancel',_cleanTouch);});function _onTouchStart(event){singleTapTimeout&&singleTapTimeout.cancel();longTapTimeout&&longTapTimeout.cancel();EVENT=event;var now=Date.now();var difftime=now-(touch.lasttime||now);var touches=_getTouches(event);var eventCount=touches.length;var target=Baic(_getTarget(touches[0].target));firstTouch=_touchesPosition(touches,eventCount);touch.el=target;touch.eventCount=eventCount;touch.lasttime=now;touch.dx=0;touch.dy=0;touch.enabled=false;if(touch.tapCount){touch.tapCount++;}else{touch.tapCount=1;}if(eventCount===1){touch.enabled=true;touch.gap=difftime>0&&difftime<=EVENT_OPTIONS.singleDelay;longTapTimeout=_triggerLongTap.defer(EVENT_OPTIONS.longDelay);}else if(eventCount===2){touch.initialDistance=_distance(firstTouch);touch.distance=0;}}function _onTouchMove(event){EVENT=event;if(touch.el){var touches=_getTouches(event);var eventCount=touches.length;if(eventCount===touch.eventCount){lastTouch=_touchesPosition(touches,eventCount);touch.dx=lastTouch[0].x-firstTouch[0].x;touch.dy=lastTouch[0].y-firstTouch[0].y;if(eventCount===1){if(touch.enabled&&!(touch.enabled=_inHysteresisSquared())){_trigger("dragStart");}if(!touch.enabled){_trigger("drag");_trigger("drag"+_direction(firstTouch[0].x,lastTouch[0].x,firstTouch[0].y,lastTouch[0].y).firstUpperCase());}}else if(eventCount===2){_triggerZooming();return false;}}else{_cleanTouch();}}}function _onTouchEnd(event){EVENT=event;if(touch.eventCount===1){if(touch.enabled){longTapTimeout&&longTapTimeout.cancel();if(touch.tapCount===1){Baic.browser.mobile&&_trigger('tap');singleTapTimeout=_triggerSingleTap.defer(EVENT_OPTIONS.singleDelay);}else if(touch.tapCount===2&&touch.gap&&Baic.browser.mobile){_trigger('doubleTap');_cleanTouch();}return;}else{_trigger('drop',{dir:_direction(firstTouch[0].x,lastTouch[0].x,firstTouch[0].y,lastTouch[0].y)});}}else{if(touch.distance!==0){_trigger('zoom',{distance:touch.distance,scale:touch.scale});}}_cleanTouch();}function _getTouches(event){return event.touches||[event];}function _getTarget(node){return'tagName'in node?node:node.parentNode;}function _inHysteresisSquared(){return Math.pow(touch.dy,2)+Math.pow(touch.dx,2)<=16;}function _trigger(type,params){if(touch.el){params=Baic.extend(params,{starttime:touch.lasttime,dx:touch.dx,dy:touch.dy});EVENT_ATTRIBUTE.forEach(function(item){params[item]=EVENT.type==='touchend'&&EVENT.changedTouches&&EVENT.changedTouches[0]&&EVENT.changedTouches[0][item]||EVENT.touches&&EVENT.touches[0]&&EVENT.touches[0][item]||EVENT[item];});touch.el.trigger(type,params,EVENT);}}function _triggerLongTap(){if(touch.lasttime&&Date.now()-touch.lasttime>=EVENT_OPTIONS.longDelay&&_inHysteresisSquared()){_trigger('longTap');}}function _triggerSingleTap(){_trigger('singleTap');_cleanTouch();}function _touchesPosition(touches,eventCount){var result=[];touches=touches[0].targetTouches||touches;for(var i=0;i<eventCount;i++){result.push({x:touches[i].pageX,y:touches[i].pageY});}return result;}function _distance(touchesData){return Math.sqrt(Math.pow(touchesData[0].x-touchesData[1].x,2)+Math.pow(touchesData[0].y-touchesData[1].y,2));}function _direction(x1,x2,y1,y2){var dx=x1-x2;var dy=y1-y2;return Math.abs(dx)>=Math.abs(dy)?dx>0?'left':'right':dy>0?'up':'down';}function _cleanTouch(event){singleTapTimeout&&singleTapTimeout.cancel();longTapTimeout&&longTapTimeout.cancel();firstTouch=[];lastTouch=[];touch={};}function _triggerZooming(){var distance=_distance(lastTouch);var diff=distance-touch.initialDistance|0;if(Math.abs(diff)>EVENT_OPTIONS.zoomDelay||touch.distance){touch.distance=diff;touch.scale=distance/touch.initialDistance;_trigger('zooming',{distance:diff,scale:touch.scale});}}})();console.timeEnd('touch');console.time('task');;(function(){'use strict';var asap=function(){// Use the fastest possible means to execute a task in a future turn
// of the event loop.
// linked list of tasks (single, with head node)
var head={task:void 0,next:null};var tail=head;var flushing=false;var requestFlush=void 0;function flush(){/* jshint loopfunc: true */while(head.next){head=head.next;var task=head.task;head.task=void 0;try{task();}catch(e){setTimeout(function(){throw e;},0);}}flushing=false;}if(typeof MessageChannel!=="undefined"){// modern browsers
// http://www.nonblocking.io/2011/06/windownexttick.html
var channel=new MessageChannel();channel.port1.onmessage=flush;requestFlush=function requestFlush(){channel.port2.postMessage(0);};}else{// old browsers
requestFlush=function requestFlush(){setTimeout(flush,0);};}return function(task){tail=tail.next={task:task,next:null};if(!flushing){flushing=true;requestFlush();}};}.call(undefined);var _Task=function _Task(asap){undefined.__asap__=asap;return undefined;};var _index=0;var _queue={};var _queueArgs={};var _async={};var _asyncArgs={};Baic.extend(_Task.prototype,{scope:function scope(fn){if(this.__asap__){asap(fn);}else{fn();}}});var _runQueue=function _runQueue(){_queue.forEach(function(fn,key){var args=_queueArgs[key];fn.result=fn.apply(args[0],args.slice(1));});return new _Task();};var _runAsync=function _runAsync(){_async.forEach(function(fn,key){asap(function(){var args=_asyncArgs[key];fn.result=fn.apply(args[0],args.slice(1));});});return new _Task(true);};var _run=function _run(){asap(_runQueue);_runAsync();return new _Task(true);};Baic.extend(_Task,{run:_run,runQueue:_runQueue,runAsync:_runAsync,clean:function clean(){asap(function(){_index=0;_queue={};_queueArgs={};_async={};_asyncArgs={};});},inject:function inject(){var args=arguments.toArray();var scope=args[0];if(!scope){return{};}if(scope.__async__){asap(function(){_asyncArgs[scope.__taskindex__]=args;});}else{_queueArgs[scope.__taskindex__]=args;}return scope;},expose:function expose(){if(DEBUG){console.group('task.js');console.log('_index:',_index);console.log('_queue:',_queue);console.log('_queueArgs:',JSON.stringify(_queueArgs));console.log('_async:',_async);console.log('_asyncArgs:',JSON.stringify(_asyncArgs));console.groupEnd();}},asyncExpose:function asyncExpose(){if(DEBUG){asap(_Task.expose);}}});Baic.extend(Function.prototype,{queue:function queue(){var args=arguments.toArray();args.unshift(this);_queue[_index]=this;_queueArgs[_index]=args;this.__taskindex__=_index;this.__async__=false;_index++;return this;},async:function async(){var args=arguments.toArray();args.unshift(this);_async[_index]=this;_asyncArgs[_index]=args;this.__taskindex__=_index;this.__async__=true;_index++;return this;},inject:function inject(){return _Task.inject.apply(this,[this].concat(arguments.toArray()));}});Baic.extend({task:_Task,runAsyncTask:_runAsync,runQueueTask:_runQueue,runTask:_run,cleanTask:function cleanTask(){_Task.clean();}});})();console.timeEnd('task');console.time('storage');;(function(){'use strict';var _isValidKey=new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$');Baic.extend({storage:{set:function set(key,value,expires){if(_isValidKey.test(key)){if(Baic.isObject(value)){value="@"+value.toStr();}window.localStorage.setItem(key,value);if(expires){if(Baic.isNumber(expires)){expires=date.setTime(Date.now()+expires);}window.localStorage.setItem(key+".expires",expires);}}},get:function get(key){var result=null;if(_isValidKey.test(key)){result=window.localStorage.getItem(key);if(result){if(result.indexOf("@")===0){result=result.slice(1).parseJSON();}var expires=parseInt(window.localStorage.getItem(key+".expires"));expires=expires?new Date(expires).getTime():null;if(result&&expires&&expires<Date.now()){result=null;window.localStorage.removeItem(key);window.localStorage.removeItem(key+".expires");}}}return result;},remove:function remove(key){if(_isValidKey.test(key)){window.localStorage.removeItem(key);window.localStorage.removeItem(key+".expires");}},clearAll:function clearAll(){window.localStorage.clear();}},cookie:{get:function get(key){var result=null;if(_isValidKey.test(key)){result=new RegExp("(^| )"+key+"=([^;\/]*)([^;\x24]*)(;|\x24)").exec(document.cookie);if(result){result=result[2]||null;}if(Baic.isString(result)){return decodeURIComponent(result);}}return null;},set:function set(key,value,expires){if(_isValidKey.test(key)){if(Baic.isNumber(expires)){expires=";expires="+new Date(Date.now()+expires*1000).toGMTString();}else{expires="";}document.cookie=encodeURIComponent(key)+'='+encodeURIComponent(value.toStr())+expires;}},remove:function remove(key){if(_isValidKey.test(key)){var obj=this.get(key);if(obj!=null){this.set(key,"",-1);}}},clearAll:function clearAll(){(document.cookie.match(/[^ =;]+(?=\=)/g)||[]).forEach(Baic.cookie.remove.bind(this));}}});})();console.timeEnd('storage');console.time('selector');;(function(){'use strict';var// http://www.w3.org/TR/css3-syntax/#characters
IS_HTML_FRAGMENT=/^\s*<(\w+|!)[^>]*>/,CLASS_SELECTOR=/^\.([\w-]+)$/,ID_SELECTOR=/^#[\w\d-]+$/,TAG_SELECTOR=/^[\w-]+$/,EVENT_PREFIX=/^on[A-Z]/,TMP_CONTAINER=document.createElement("div");Baic.extend({getDOMObject:function getDOMObject(selector,children){var elementTypes=[1,9,11];if(Baic.isArray(selector)){return selector.filter(function(item){return item!=null;});}else if(Baic.isString(selector)){selector=selector.trim();if(IS_HTML_FRAGMENT.test(selector)){TMP_CONTAINER.innerHTML=""+selector;var tmp_container=Baic(TMP_CONTAINER);var nodes=tmp_container.children().toArray();tmp_container.empty();return nodes;}else{var dom=Baic.selector(document,selector);if(children&&Baic.isString(children)){if(dom.length===1){dom=Baic.selector(dom[0],children);}else{dom=dom.map(function(item){return Baic.selector(item,children);});}}return dom;}}else if(elementTypes.indexOf(selector.nodeType)>=0||Baic.isWindow(selector)){return[selector];}},selector:function selector(dom,_selector){var elements=[];if(CLASS_SELECTOR.test(_selector)){elements=dom.getElementsByClassName(_selector.substring(1));}else if(TAG_SELECTOR.test(_selector)){elements=dom.getElementsByTagName(_selector);}else if(ID_SELECTOR.test(_selector)){elements=dom.getElementById(_selector.substring(1));if(!elements)elements=[];}else{elements=dom.querySelectorAll(_selector);}return elements.nodeType?[elements]:elements.toArray();}});Baic.extend(Baic.fn,{find:function find(selector){return Baic(this.map(function(item){return Baic.selector(item,selector);}).flatten());},parent:function parent(selector){if(!selector){return Baic(this.map(function(item){return item.parentNode;}));}else{var ancestors=[];return Baic(this.map(function(item){if(item&&(item=item.parentNode)&&item!==document&&ancestors.indexOf(item)<0&&ancestors.push(item)&&_filtered(item,selector)){return item;}}));}},siblings:function siblings(selector){var siblings=[];return Baic(this.map(function(item){return item.parentNode.children.toArray().filter(function(child){return siblings.indexOf(child)<0&&siblings.push(child)&&child!==item&&_filtered(item,selector);});}).flatten());},children:function children(selector){return Baic(this.map(function(item){return item.children.toArray().filter(function(child){return _filtered(child,selector);});}).flatten());},first:function first(){return Baic(this[0]);},last:function last(){return Baic(this[this.length-1]);}});function _filtered(dom,selector){return selector?dom.parentNode&&Baic.selector(dom.parentNode,selector).indexOf(dom)>=0:true;}})();console.timeEnd('selector');console.time('require');;(function(window,document){'use strict';var EXP_READY=/complete|loaded|interactive/,EXP_HTTP=/((^http)|(^https)):\/\/(\w)+.(\w)+/i,EXP_EXT=/(?:\.js|\.css|\.jpg|\.jpeg|\.png|\.gif)$/i,EXP_IMAGE=/(?:\.jpg|\.jpeg|\.png|\.gif)$/i,EXP_CSS=/\.css$/i,EXP_JS=/\.js$/i;var scripts=document.getElementsByTagName("script"),script,main,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement,len=scripts.length,isReady=EXP_READY.test(document.readyState),baseUrl=_getScriptAbsPath();function _getScriptAbsPath(){var url="";try{url=document.currentScript.src;}catch(e){url=/(?:http|https|file):\/\/.*?\/.+?.js/.exec(e.stack||e.sourceURL||e.stacktrace)[0]||"";}return url.substring(0,url.lastIndexOf('/')+1);}function _getUrl(url){if(!EXP_HTTP.test(url)){url=baseUrl+url;}if(!EXP_EXT.test(url)&&url.indexOf("?")<0){url+='.js';}return url;}function _createJs(url){var node=document.createElement("script");node.src=url;return new Promise(function(resolve,reject){function _onload(event){if(event.type==="load"||EXP_READY.test(node.readyState)){_removeListener();resolve(node);}}function _error(){_removeListener();reject(url);}function _removeListener(){if(node.removeEventListener){node.removeEventListener("load",_onload,false);node.removeEventListener("error",_error,false);}else{node.detachEvent('onreadystatechange',_onload);}}if(node.addEventListener){node.addEventListener("load",_onload,false);node.addEventListener("error",_error,false);}else{node.attachEvent('onreadystatechange',_onload);}head.appendChild(node);});}function _createCss(url){var node=document.createElement("link");node.rel="stylesheet";node.href=url;head.appendChild(node);return Promise.resolve(node);}function _createImage(url){var image=new Image();image.src=url;if(image.complete){return Promise.resolve(image);}else{return new Promise(function(resolve,reject){image.onload=function(){resolve(image);};image.onerror=function(){reject(image);};});}}function _load(url){var complete=_getUrl(url);var index=complete.indexOf("?");if(index>=0){url=complete.substring(0,index);}else{url=complete;}if(EXP_JS.test(url)){return _createJs(complete);}if(EXP_CSS.test(url)){return _createCss(complete);}if(EXP_IMAGE.test(url)){return _createImage(complete);}return Promise.resolve(complete);}var require=function require(){var args=Array.prototype.slice.call(arguments);if(args.length>0&&Array.isArray(args[0])){args=args[0];}return new Promise(function(resolve){function _DOMLoaded(){if(document.addEventListener){document.removeEventListener('DOMContentLoaded',_DOMLoaded,false);}else if(isReady){document.detachEvent('onreadystatechange',_DOMLoaded);}else{return;}isReady=true;resolve();}if(!isReady){if(document.addEventListener){document.addEventListener('DOMContentLoaded',_DOMLoaded,false);window.addEventListener('load',_DOMLoaded,false);}else{document.attachEvent('onreadystatechange',_DOMLoaded);window.attachEvent('onload',_DOMLoaded);}}else{setTimeout(_DOMLoaded,100);}}).then(function(){return Promise.all(args.map(function(item){return item?_load(item):Promise.resolve();}));});};for(var i=0;i<len;i++){script=scripts[i];baseUrl=script.getAttribute("data-base-url")||baseUrl;if(script.hasAttribute("data-require")){main=script.getAttribute("data-require");if(main){main.split(';').forEach(function(item){if(item.indexOf(",")<0){require(item);}else{item.split(',').forEach(function(item){require(item);});}});}break;}};require.baseUrl=baseUrl;window.require=require;})(window,document);console.timeEnd('require');console.time('promise');;(function(){'use strict';var async=function(require){/*jshint maxcomplexity:6*/// Sniff "best" async scheduling option
// Prefer process.nextTick or MutationObserver, then check for
// setTimeout, and finally vertx, since its the only env that doesn't
// have setTimeout
var MutationObs;var capturedSetTimeout=typeof setTimeout!=='undefined'&&setTimeout;// Default env
var setTimer=function setTimer(f,ms){return setTimeout(f,ms);};var clearTimer=function clearTimer(t){return clearTimeout(t);};var asap=function asap(f){return capturedSetTimeout(f,0);};// Detect specific env
if(isNode()){// Node
asap=function asap(f){return process.nextTick(f);};}else if(MutationObs=hasMutationObserver()){// Modern browser
asap=initMutationObserver(MutationObs);}else if(!capturedSetTimeout){// vert.x
var vertxRequire=require;var vertx=vertxRequire('vertx');setTimer=function setTimer(f,ms){return vertx.setTimer(ms,f);};clearTimer=vertx.cancelTimer;asap=vertx.runOnLoop||vertx.runOnContext;}return{setTimer:setTimer,clearTimer:clearTimer,asap:asap};function isNode(){return typeof process!=='undefined'&&Object.prototype.toString.call(process)==='[object process]';}function hasMutationObserver(){return typeof MutationObserver==='function'&&MutationObserver||typeof WebKitMutationObserver==='function'&&WebKitMutationObserver;}function initMutationObserver(MutationObserver){var scheduled;var node=document.createTextNode('');var o=new MutationObserver(run);o.observe(node,{characterData:true});function run(){var f=scheduled;scheduled=void 0;f();}var i=0;return function(f){scheduled=f;node.data=i^=1;};}}();var Scheduler=function(){// Credit to Twisol (https://github.com/Twisol) for suggesting
// this type of extensible queue + trampoline approach for next-tick conflation.
/**
     * Async task scheduler
     * @param {function} async function to schedule a single async function
     * @constructor
     */function Scheduler(async){this._async=async;this._running=false;this._queue=this;this._queueLen=0;this._afterQueue={};this._afterQueueLen=0;var self=this;this.drain=function(){self._drain();};}/**
     * Enqueue a task
     * @param {{ run:function }} task
     */Scheduler.prototype.enqueue=function(task){undefined._queue[undefined._queueLen++]=task;undefined.run();};/**
     * Enqueue a task to run after the main task queue
     * @param {{ run:function }} task
     */Scheduler.prototype.afterQueue=function(task){undefined._afterQueue[undefined._afterQueueLen++]=task;undefined.run();};Scheduler.prototype.run=function(){if(!undefined._running){undefined._running=true;undefined._async(undefined.drain);}};/**
     * Drain the handler queue entirely, and then the after queue
     */Scheduler.prototype._drain=function(){var i=0;for(;i<undefined._queueLen;++i){undefined._queue[i].run();undefined._queue[i]=void 0;}undefined._queueLen=0;undefined._running=false;for(i=0;i<undefined._afterQueueLen;++i){undefined._afterQueue[i].run();undefined._afterQueue[i]=void 0;}undefined._afterQueueLen=0;};return Scheduler;}();var makePromise=makePromise=function makePromise(environment){var tasks=environment.scheduler;var emitRejection=initEmitRejection();var objectCreate=Object.create||function(proto){Child=function Child(){};Child.prototype=proto;return new Child();};/**
       * Create a promise whose fate is determined by resolver
       * @constructor
       * @returns {Promise} promise
       * @name Promise
       */function Promise(resolver,handler){this._handler=resolver===Handler?handler:init(resolver);}/**
       * Run the supplied resolver
       * @param resolver
       * @returns {Pending}
       */function init(resolver){var handler=new Pending();try{resolver(promiseResolve,promiseReject,promiseNotify);}catch(e){promiseReject(e);}return handler;/**
         * Transition from pre-resolution state to post-resolution state, notifying
         * all listeners of the ultimate fulfillment or rejection
         * @param {*} x resolution value
         */function promiseResolve(x){handler.resolve(x);}/**
         * Reject this promise with reason, which will be used verbatim
         * @param {Error|*} reason rejection reason, strongly suggested
         *   to be an Error type
         */function promiseReject(reason){handler.reject(reason);}/**
         * @deprecated
         * Issue a progress event, notifying all progress listeners
         * @param {*} x progress event payload to pass to all listeners
         */function promiseNotify(x){handler.notify(x);}}// Creation
Promise.resolve=resolve;Promise.reject=reject;Promise.never=never;Promise._defer=defer;Promise._handler=getHandler;/**
       * Returns a trusted promise. If x is already a trusted promise, it is
       * returned, otherwise returns a new trusted Promise which follows x.
       * @param  {*} x
       * @return {Promise} promise
       */function resolve(x){return isPromise(x)?x:new Promise(Handler,new Async(getHandler(x)));}/**
       * Return a reject promise with x as its reason (x is used verbatim)
       * @param {*} x
       * @returns {Promise} rejected promise
       */function reject(x){return new Promise(Handler,new Async(new Rejected(x)));}/**
       * Return a promise that remains pending forever
       * @returns {Promise} forever-pending promise.
       */function never(){return foreverPendingPromise;// Should be frozen
}/**
       * Creates an internal {promise, resolver} pair
       * @private
       * @returns {Promise}
       */function defer(){return new Promise(Handler,new Pending());}// Transformation and flow control
/**
       * Transform this promise's fulfillment value, returning a new Promise
       * for the transformed result.  If the promise cannot be fulfilled, onRejected
       * is called with the reason.  onProgress *may* be called with updates toward
       * this promise's fulfillment.
       * @param {function=} onFulfilled fulfillment handler
       * @param {function=} onRejected rejection handler
       * @param {function=} onProgress @deprecated progress handler
       * @return {Promise} new promise
       */Promise.prototype.then=function(onFulfilled,onRejected,onProgress){var parent=undefined._handler;var state=parent.join().state();if(typeof onFulfilled!=='function'&&state>0||typeof onRejected!=='function'&&state<0){// Short circuit: value will not change, simply share handler
return new undefined.constructor(Handler,parent);}var p=undefined._beget();var child=p._handler;parent.chain(child,parent.receiver,onFulfilled,onRejected,onProgress);return p;};/**
       * If this promise cannot be fulfilled due to an error, call onRejected to
       * handle the error. Shortcut for .then(undefined, onRejected)
       * @param {function?} onRejected
       * @return {Promise}
       */Promise.prototype['catch']=function(onRejected){return undefined.then(void 0,onRejected);};/**
       * Creates a new, pending promise of the same type as this promise
       * @private
       * @returns {Promise}
       */Promise.prototype._beget=function(){return begetFrom(undefined._handler,undefined.constructor);};function begetFrom(parent,Promise){var child=new Pending(parent.receiver,parent.join().context);return new Promise(Handler,child);}// Array combinators
Promise.all=all;Promise.race=race;Promise._traverse=traverse;/**
       * Return a promise that will fulfill when all promises in the
       * input array have fulfilled, or will reject when one of the
       * promises rejects.
       * @param {array} promises array of promises
       * @returns {Promise} promise for array of fulfillment values
       */function all(promises){return traverseWith(snd,null,promises);}/**
       * Array<Promise<X>> -> Promise<Array<f(X)>>
       * @private
       * @param {function} f function to apply to each promise's value
       * @param {Array} promises array of promises
       * @returns {Promise} promise for transformed values
       */function traverse(f,promises){return traverseWith(tryCatch2,f,promises);}function traverseWith(tryMap,f,promises){var handler=typeof f==='function'?mapAt:settleAt;var resolver=new Pending();var pending=promises.length>>>0;var results=new Array(pending);for(var i=0,x;i<promises.length&&!resolver.resolved;++i){x=promises[i];if(x===void 0&&!(i in promises)){--pending;continue;}traverseAt(promises,handler,i,x,resolver);}if(pending===0){resolver.become(new Fulfilled(results));}return new Promise(Handler,resolver);function mapAt(i,x,resolver){if(!resolver.resolved){traverseAt(promises,settleAt,i,tryMap(f,x,i),resolver);}}function settleAt(i,x,resolver){results[i]=x;if(--pending===0){resolver.become(new Fulfilled(results));}}}function traverseAt(promises,handler,i,x,resolver){if(maybeThenable(x)){var h=getHandlerMaybeThenable(x);var s=h.state();if(s===0){h.fold(handler,i,void 0,resolver);}else if(s>0){handler(i,h.value,resolver);}else{resolver.become(h);visitRemaining(promises,i+1,h);}}else{handler(i,x,resolver);}}Promise._visitRemaining=visitRemaining;function visitRemaining(promises,start,handler){for(var i=start;i<promises.length;++i){markAsHandled(getHandler(promises[i]),handler);}}function markAsHandled(h,handler){if(h===handler){return;}var s=h.state();if(s===0){h.visit(h,void 0,h._unreport);}else if(s<0){h._unreport();}}/**
       * Fulfill-reject competitive race. Return a promise that will settle
       * to the same state as the earliest input promise to settle.
       *
       * WARNING: The ES6 Promise spec requires that race()ing an empty array
       * must return a promise that is pending forever.  This implementation
       * returns a singleton forever-pending promise, the same singleton that is
       * returned by Promise.never(), thus can be checked with ===
       *
       * @param {array} promises array of promises to race
       * @returns {Promise} if input is non-empty, a promise that will settle
       * to the same outcome as the earliest input promise to settle. if empty
       * is empty, returns a promise that will never settle.
       */function race(promises){if((typeof promises==='undefined'?'undefined':_typeof(promises))!=='object'||promises===null){return reject(new TypeError('non-iterable passed to race()'));}// Sigh, race([]) is untestable unless we return *something*
// that is recognizable without calling .then() on it.
return promises.length===0?never():promises.length===1?resolve(promises[0]):runRace(promises);}function runRace(promises){var resolver=new Pending();var i,x,h;for(i=0;i<promises.length;++i){x=promises[i];if(x===void 0&&!(i in promises)){continue;}h=getHandler(x);if(h.state()!==0){resolver.become(h);visitRemaining(promises,i+1,h);break;}else{h.visit(resolver,resolver.resolve,resolver.reject);}}return new Promise(Handler,resolver);}// Promise internals
// Below this, everything is @private
/**
       * Get an appropriate handler for x, without checking for cycles
       * @param {*} x
       * @returns {object} handler
       */function getHandler(x){if(isPromise(x)){return x._handler.join();}return maybeThenable(x)?getHandlerUntrusted(x):new Fulfilled(x);}/**
       * Get a handler for thenable x.
       * NOTE: You must only call this if maybeThenable(x) == true
       * @param {object|function|Promise} x
       * @returns {object} handler
       */function getHandlerMaybeThenable(x){return isPromise(x)?x._handler.join():getHandlerUntrusted(x);}/**
       * Get a handler for potentially untrusted thenable x
       * @param {*} x
       * @returns {object} handler
       */function getHandlerUntrusted(x){try{var untrustedThen=x.then;return typeof untrustedThen==='function'?new Thenable(untrustedThen,x):new Fulfilled(x);}catch(e){return new Rejected(e);}}/**
       * Handler for a promise that is pending forever
       * @constructor
       */function Handler(){}Handler.prototype.when=Handler.prototype.become=Handler.prototype.notify// deprecated
=Handler.prototype.fail=Handler.prototype._unreport=Handler.prototype._report=noop;Handler.prototype._state=0;Handler.prototype.state=function(){return undefined._state;};/**
       * Recursively collapse handler chain to find the handler
       * nearest to the fully resolved value.
       * @returns {object} handler nearest the fully resolved value
       */Handler.prototype.join=function(){var h=undefined;while(h.handler!==void 0){h=h.handler;}return h;};Handler.prototype.chain=function(to,receiver,fulfilled,rejected,progress){undefined.when({resolver:to,receiver:receiver,fulfilled:fulfilled,rejected:rejected,progress:progress});};Handler.prototype.visit=function(receiver,fulfilled,rejected,progress){undefined.chain(failIfRejected,receiver,fulfilled,rejected,progress);};Handler.prototype.fold=function(f,z,c,to){undefined.when(new Fold(f,z,c,to));};/**
       * Handler that invokes fail() on any handler it becomes
       * @constructor
       */function FailIfRejected(){}inherit(Handler,FailIfRejected);FailIfRejected.prototype.become=function(h){h.fail();};var failIfRejected=new FailIfRejected();/**
       * Handler that manages a queue of consumers waiting on a pending promise
       * @constructor
       */function Pending(receiver,inheritedContext){Promise.createContext(this,inheritedContext);this.consumers=void 0;this.receiver=receiver;this.handler=void 0;this.resolved=false;}inherit(Handler,Pending);Pending.prototype._state=0;Pending.prototype.resolve=function(x){undefined.become(getHandler(x));};Pending.prototype.reject=function(x){if(undefined.resolved){return;}undefined.become(new Rejected(x));};Pending.prototype.join=function(){if(!undefined.resolved){return undefined;}var h=undefined;while(h.handler!==void 0){h=h.handler;if(h===undefined){return undefined.handler=cycle();}}return h;};Pending.prototype.run=function(){var q=undefined.consumers;var handler=undefined.handler;undefined.handler=undefined.handler.join();undefined.consumers=void 0;for(var i=0;i<q.length;++i){handler.when(q[i]);}};Pending.prototype.become=function(handler){if(undefined.resolved){return;}undefined.resolved=true;undefined.handler=handler;if(undefined.consumers!==void 0){tasks.enqueue(undefined);}if(undefined.context!==void 0){handler._report(undefined.context);}};Pending.prototype.when=function(continuation){if(undefined.resolved){tasks.enqueue(new ContinuationTask(continuation,undefined.handler));}else{if(undefined.consumers===void 0){undefined.consumers=[continuation];}else{undefined.consumers.push(continuation);}}};/**
       * @deprecated
       */Pending.prototype.notify=function(x){if(!undefined.resolved){tasks.enqueue(new ProgressTask(x,undefined));}};Pending.prototype.fail=function(context){var c=typeof context==='undefined'?undefined.context:context;undefined.resolved&&undefined.handler.join().fail(c);};Pending.prototype._report=function(context){undefined.resolved&&undefined.handler.join()._report(context);};Pending.prototype._unreport=function(){undefined.resolved&&undefined.handler.join()._unreport();};/**
       * Wrap another handler and force it into a future stack
       * @param {object} handler
       * @constructor
       */function Async(handler){this.handler=handler;}inherit(Handler,Async);Async.prototype.when=function(continuation){tasks.enqueue(new ContinuationTask(continuation,undefined));};Async.prototype._report=function(context){undefined.join()._report(context);};Async.prototype._unreport=function(){undefined.join()._unreport();};/**
       * Handler that wraps an untrusted thenable and assimilates it in a future stack
       * @param {function} then
       * @param {{then: function}} thenable
       * @constructor
       */function Thenable(then,thenable){Pending.call(this);tasks.enqueue(new AssimilateTask(then,thenable,this));}inherit(Pending,Thenable);/**
       * Handler for a fulfilled promise
       * @param {*} x fulfillment value
       * @constructor
       */function Fulfilled(x){Promise.createContext(this);this.value=x;}inherit(Handler,Fulfilled);Fulfilled.prototype._state=1;Fulfilled.prototype.fold=function(f,z,c,to){runContinuation3(f,z,undefined,c,to);};Fulfilled.prototype.when=function(cont){runContinuation1(cont.fulfilled,undefined,cont.receiver,cont.resolver);};var errorId=0;/**
       * Handler for a rejected promise
       * @param {*} x rejection reason
       * @constructor
       */function Rejected(x){Promise.createContext(this);this.id=++errorId;this.value=x;this.handled=false;this.reported=false;this._report();}inherit(Handler,Rejected);Rejected.prototype._state=-1;Rejected.prototype.fold=function(f,z,c,to){to.become(undefined);};Rejected.prototype.when=function(cont){if(typeof cont.rejected==='function'){undefined._unreport();}runContinuation1(cont.rejected,undefined,cont.receiver,cont.resolver);};Rejected.prototype._report=function(context){tasks.afterQueue(new ReportTask(undefined,context));};Rejected.prototype._unreport=function(){if(undefined.handled){return;}undefined.handled=true;tasks.afterQueue(new UnreportTask(undefined));};Rejected.prototype.fail=function(context){undefined.reported=true;emitRejection('unhandledRejection',undefined);Promise.onFatalRejection(undefined,context===void 0?undefined.context:context);};function ReportTask(rejection,context){this.rejection=rejection;this.context=context;}ReportTask.prototype.run=function(){if(!undefined.rejection.handled&&!undefined.rejection.reported){undefined.rejection.reported=true;emitRejection('unhandledRejection',undefined.rejection)||Promise.onPotentiallyUnhandledRejection(undefined.rejection,undefined.context);}};function UnreportTask(rejection){this.rejection=rejection;}UnreportTask.prototype.run=function(){if(undefined.rejection.reported){emitRejection('rejectionHandled',undefined.rejection)||Promise.onPotentiallyUnhandledRejectionHandled(undefined.rejection);}};// Unhandled rejection hooks
// By default, everything is a noop
Promise.createContext=Promise.enterContext=Promise.exitContext=Promise.onPotentiallyUnhandledRejection=Promise.onPotentiallyUnhandledRejectionHandled=Promise.onFatalRejection=noop;// Errors and singletons
var foreverPendingHandler=new Handler();var foreverPendingPromise=new Promise(Handler,foreverPendingHandler);function cycle(){return new Rejected(new TypeError('Promise cycle'));}// Task runners
/**
       * Run a single consumer
       * @constructor
       */function ContinuationTask(continuation,handler){this.continuation=continuation;this.handler=handler;}ContinuationTask.prototype.run=function(){undefined.handler.join().when(undefined.continuation);};/**
       * Run a queue of progress handlers
       * @constructor
       */function ProgressTask(value,handler){this.handler=handler;this.value=value;}ProgressTask.prototype.run=function(){var q=undefined.handler.consumers;if(q===void 0){return;}for(var c,i=0;i<q.length;++i){c=q[i];runNotify(c.progress,undefined.value,undefined.handler,c.receiver,c.resolver);}};/**
       * Assimilate a thenable, sending it's value to resolver
       * @param {function} then
       * @param {object|function} thenable
       * @param {object} resolver
       * @constructor
       */function AssimilateTask(then,thenable,resolver){this._then=then;this.thenable=thenable;this.resolver=resolver;}AssimilateTask.prototype.run=function(){var h=undefined.resolver;tryAssimilate(undefined._then,undefined.thenable,_resolve,_reject,_notify);function _resolve(x){h.resolve(x);}function _reject(x){h.reject(x);}function _notify(x){h.notify(x);}};function tryAssimilate(then,thenable,resolve,reject,notify){try{then.call(thenable,resolve,reject,notify);}catch(e){reject(e);}}/**
       * Fold a handler value with z
       * @constructor
       */function Fold(f,z,c,to){this.f=f;this.z=z;this.c=c;this.to=to;this.resolver=failIfRejected;this.receiver=this;}Fold.prototype.fulfilled=function(x){undefined.f.call(undefined.c,undefined.z,x,undefined.to);};Fold.prototype.rejected=function(x){undefined.to.reject(x);};Fold.prototype.progress=function(x){undefined.to.notify(x);};// Other helpers
/**
       * @param {*} x
       * @returns {boolean} true iff x is a trusted Promise
       */function isPromise(x){return x instanceof Promise;}/**
       * Test just enough to rule out primitives, in order to take faster
       * paths in some code
       * @param {*} x
       * @returns {boolean} false iff x is guaranteed *not* to be a thenable
       */function maybeThenable(x){return((typeof x==='undefined'?'undefined':_typeof(x))==='object'||typeof x==='function')&&x!==null;}function runContinuation1(f,h,receiver,next){if(typeof f!=='function'){return next.become(h);}Promise.enterContext(h);tryCatchReject(f,h.value,receiver,next);Promise.exitContext();}function runContinuation3(f,x,h,receiver,next){if(typeof f!=='function'){return next.become(h);}Promise.enterContext(h);tryCatchReject3(f,x,h.value,receiver,next);Promise.exitContext();}/**
       * @deprecated
       */function runNotify(f,x,h,receiver,next){if(typeof f!=='function'){return next.notify(x);}Promise.enterContext(h);tryCatchReturn(f,x,receiver,next);Promise.exitContext();}function tryCatch2(f,a,b){try{return f(a,b);}catch(e){return reject(e);}}/**
       * Return f.call(thisArg, x), or if it throws return a rejected promise for
       * the thrown exception
       */function tryCatchReject(f,x,thisArg,next){try{next.become(getHandler(f.call(thisArg,x)));}catch(e){next.become(new Rejected(e));}}/**
       * Same as above, but includes the extra argument parameter.
       */function tryCatchReject3(f,x,y,thisArg,next){try{f.call(thisArg,x,y,next);}catch(e){next.become(new Rejected(e));}}/**
       * @deprecated
       * Return f.call(thisArg, x), or if it throws, *return* the exception
       */function tryCatchReturn(f,x,thisArg,next){try{next.notify(f.call(thisArg,x));}catch(e){next.notify(e);}}function inherit(Parent,Child){Child.prototype=objectCreate(Parent.prototype);Child.prototype.constructor=Child;}function snd(x,y){return y;}function noop(){}function initEmitRejection(){/*global process, self, CustomEvent*/if(typeof process!=='undefined'&&process!==null&&typeof process.emit==='function'){// Returning falsy here means to call the default
// onPotentiallyUnhandledRejection API.  This is safe even in
// browserify since process.emit always returns falsy in browserify:
// https://github.com/defunctzombie/node-process/blob/master/browser.js#L40-L46
return function(type,rejection){return type==='unhandledRejection'?process.emit(type,rejection.value,rejection):process.emit(type,rejection);};}else if(typeof self!=='undefined'&&typeof CustomEvent==='function'){return function(noop,self,CustomEvent){var hasCustomEvent=false;try{var ev=new CustomEvent('unhandledRejection');hasCustomEvent=ev instanceof CustomEvent;}catch(e){}return!hasCustomEvent?noop:function(type,rejection){var ev=new CustomEvent(type,{detail:{reason:rejection.value,key:rejection},bubbles:false,cancelable:true});return!self.dispatchEvent(ev);};}(noop,self,CustomEvent);}return noop;}return Promise;};var Promise=makePromise({scheduler:new Scheduler(async.asap)});(Baic.Promise=Promise)&&("Promise"in window||(window.Promise=Promise));})();console.timeEnd('promise');console.time('fetch');;(function(){'use strict';if(window.fetch){return;}function _normalizeName(name){if(typeof name!=='string'){name=String(name);}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name)){throw new TypeError('Invalid character in header field name');}return name.toLowerCase();}function _normalizeValue(value){if(typeof value!=='string'){value=String(value);}return value;}function Headers(headers){var _this5=this;var self=this;self.map={};if(headers instanceof Headers){headers.forEach(function(value,name){_this5.append(name,value);});}else if(headers){Object.getOwnPropertyNames(headers).forEach(function(name){self.append(name,headers[name]);});}}Baic.extend(Headers.prototype,{append:function append(name,value){name=_normalizeName(name);value=_normalizeValue(value);var list=this.map[name];if(!list){list=[];this.map[name]=list;}list.push(value);},forEach:function forEach(callback){var self=this;Object.getOwnPropertyNames(self.map).forEach(function(name){self.map[name].forEach(function(value){callback.call(self,value,name);});});},delete:function _delete(name){delete this.map[_normalizeName(name)];},get:function get(name){var values=this.map[_normalizeName(name)];return values?values[0]:null;},getAll:function getAll(name){return this.map[_normalizeName(name)]||[];},has:function has(name){return this.map.hasOwnProperty(_normalizeName(name));},set:function set(name,value){this.map[_normalizeName(name)]=[_normalizeValue(value)];}});function _consumed(body){if(body.bodyUsed){return Promise.reject(new TypeError('Already read'));}body.bodyUsed=true;}function _fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result);};reader.onerror=function(){reject(reader.error);};});}function _readBlobAsArrayBuffer(blob){var reader=new FileReader();reader.readAsArrayBuffer(blob);return _fileReaderReady(reader);}function _readBlobAsText(blob){var reader=new FileReader();reader.readAsText(blob);return _fileReaderReady(reader);}var support={blob:'FileReader'in window&&'Blob'in window&&function(){try{new Blob();return true;}catch(e){return false;}}(),formData:'FormData'in window,arrayBuffer:'ArrayBuffer'in window};function Body(){var _this6=this;this.bodyUsed=false;this._initBody=function(body){_this6._bodyInit=body;if(typeof body==='string'){_this6._bodyText=body;}else if(support.blob&&Blob.prototype.isPrototypeOf(body)){_this6._bodyBlob=body;}else if(support.formData&&FormData.prototype.isPrototypeOf(body)){_this6._bodyFormData=body;}else if(!body){_this6._bodyText='';}else if(support.arrayBuffer&&ArrayBuffer.prototype.isPrototypeOf(body)){// Only support ArrayBuffers for POST method.
// Receiving ArrayBuffers happens via Blobs, instead.
}else{throw new Error('unsupported BodyInit type');}};if(support.blob){this.blob=function(){var rejected=_consumed(_this6);if(rejected){return rejected;}if(_this6._bodyBlob){return Promise.resolve(_this6._bodyBlob);}else if(_this6._bodyFormData){throw new Error('could not read FormData body as blob');}else{return Promise.resolve(new Blob([_this6._bodyText]));}};this.arrayBuffer=function(){return _this6.blob().then(_readBlobAsArrayBuffer);};this.text=function(){var rejected=_consumed(_this6);if(rejected){return rejected;}if(_this6._bodyBlob){return _readBlobAsText(_this6._bodyBlob);}else if(_this6._bodyFormData){throw new Error('could not read FormData body as text');}else{return Promise.resolve(_this6._bodyText);}};}else{this.text=function(){var rejected=_consumed(_this6);return rejected?rejected:Promise.resolve(_this6._bodyText);};}if(support.formData){this.formData=function(){return _this6.text().then(decode);};}this.json=function(){return _this6.text().then(JSON.parse);};return this;}// HTTP methods whose capitalization should be normalized
var methods=['DELETE','GET','HEAD','OPTIONS','POST','PUT'];function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method;}function Request(input,options){options=options||{};var body=options.body;if(Request.prototype.isPrototypeOf(input)){if(input.bodyUsed){throw new TypeError('Already read');}this.url=input.url;this.credentials=input.credentials;if(!options.headers){this.headers=new Headers(input.headers);}this.method=input.method;this.mode=input.mode;if(!body){body=input._bodyInit;input.bodyUsed=true;}}else{this.url=input;}this.credentials=options.credentials||this.credentials||'omit';if(options.headers||!this.headers){this.headers=new Headers(options.headers);}this.method=normalizeMethod(options.method||this.method||'GET');this.mode=options.mode||this.mode||null;this.referrer=null;if((this.method==='GET'||this.method==='HEAD')&&body){throw new TypeError('Body not allowed for GET or HEAD requests');}this._initBody(body);}Request.prototype.clone=function(){return new Request(undefined);};function decode(body){var form=new FormData();body.trim().split('&').forEach(function(bytes){if(bytes){var split=bytes.split('=');var name=split.shift().replace(/\+/g,' ');var value=split.join('=').replace(/\+/g,' ');form.append(decodeURIComponent(name),decodeURIComponent(value));}});return form;}function headers(xhr){var head=new Headers();var pairs=xhr.getAllResponseHeaders().trim().split('\n');pairs.forEach(function(header){var split=header.trim().split(':');var key=split.shift().trim();var value=split.join(':').trim();head.append(key,value);});return head;}Body.call(Request.prototype);function Response(bodyInit,options){if(!options){options={};}this._initBody(bodyInit);this.type='default';this.status=options.status;this.ok=this.status>=200&&this.status<300;this.statusText=options.statusText;this.headers=options.headers instanceof Headers?options.headers:new Headers(options.headers);this.url=options.url||'';}Body.call(Response.prototype);Response.prototype.clone=function(){return new Response(undefined._bodyInit,{status:undefined.status,statusText:undefined.statusText,headers:new Headers(undefined.headers),url:undefined.url});};Response.error=function(){var response=new Response(null,{status:0,statusText:''});response.type='error';return response;};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(redirectStatuses.indexOf(status)===-1){throw new RangeError('Invalid status code');}return new Response(null,{status:status,headers:{location:url}});};window.Headers=Headers;window.Request=Request;window.Response=Response;window.fetch=function(input,init){return new Promise(function(resolve,reject){var request;if(Request.prototype.isPrototypeOf(input)&&!init){request=input;}else{request=new Request(input,init);}var xhr=new XMLHttpRequest();function responseURL(){if('responseURL'in xhr){return xhr.responseURL;}// Avoid security warnings on getResponseHeader when not allowed by CORS
if(/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())){return xhr.getResponseHeader('X-Request-URL');}return;}xhr.onload=function(){var status=xhr.status===1223?204:xhr.status;if(status<100||status>599){reject(new TypeError('Network request failed'));return;}var options={status:status,statusText:xhr.statusText,headers:headers(xhr),url:responseURL()};var body='response'in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options));};xhr.onerror=function(){reject(new TypeError('Network request failed'));};xhr.open(request.method,request.url,true);if(request.credentials==='include'){xhr.withCredentials=true;}if('responseType'in xhr&&support.blob){xhr.responseType='blob';}request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value);});xhr.send(typeof request._bodyInit==='undefined'?null:request._bodyInit);});};window.fetch.polyfill=true;})();console.timeEnd('fetch');console.time('oop');;(function(){'use strict';function _extends(obj){var object=function object(){if(this.__needinit__){this.init.apply(this,arguments);}};this.prototype.__needinit__=0;var prototype=new this();this.prototype.__needinit__=1;var rtn=(Baic.isFunction(obj)?obj():obj)||{};rtn.forEach(function(value,key){switch(key){case"__superclass__":case"__class__":case"__needinit__":break;case"static":Baic.extend(object,value);break;default:prototype[key]=value;}});Baic.extend(prototype,{__superclass__:this,__class__:object,constructor:object,init:prototype.init||Baic.nop});object.prototype=prototype;Baic.extend(object,{__superclass__:prototype,extends:_extends,create:function create(){this.prototype.__needinit__=0;var obj=new this();this.prototype.__needinit__=1;obj.init.apply(obj,arguments);return obj;}});return object;}Array.extends=Object.extends=_extends;})();console.timeEnd('oop');console.time('event');;(function(){'use strict';var EVENTS_PC={touchstart:'mousedown',touchmove:'mousemove',touchend:'mouseup',tap:'click',doubletap:'dblclick',orientationchange:'resize'};var HANDLERS={};Baic.extend({createEvent:function createEvent(type,options){var event=document.createEvent('Events');event.initEvent(_getEventName(type),true,true,null,null,null,null,null,null,null,null,null,null,null,null);if(options){Baic.extend(true,event,options);}return event;},addEventListener:function addEventListener(element,eventName,callback,bool){if(element.addEventListener){element.addEventListener(eventName,callback,Baic.isUndefined(bool)?false:bool);}else if(element.attachEvent){element.attachEvent('on'+eventName,callback);}else{element['on'+eventName]=callback;}},removeEventListener:function removeEventListener(element,eventName,callback,bool){if(element.removeEventListener){element.removeEventListener(eventName,callback,Baic.isUndefined(bool)?false:bool);}else if(element.detachEvent){element.detachEvent('on'+eventName,callback);}else{element['on'+eventName]=null;}}});Baic.extend(Baic.fn,{on:function on(eventName,callback,bool){var event=_getEventName(eventName);this.forEach(function(item){var id=Baic.id(item);var elementHandlers=HANDLERS[id]||(HANDLERS[id]=[]);var handler={event:event,callback:callback,proxy:_createProxyCallback(callback,item),index:elementHandlers.length};elementHandlers.push(handler);Baic.addEventListener(item,handler.event,handler.proxy,bool);});return this;},off:function off(eventName,callback,bool){var event=_getEventName(eventName);this.forEach(function(item){var id=Baic.id(item);(HANDLERS[id]||[]).forEach(function(handler){if(handler&&(!event||handler.event===event)&&(!callback||handler.callback===callback)){delete HANDLERS[id][handler.index];Baic.removeEventListener(item,handler.event,handler.proxy,bool);}});});return this;},trigger:function trigger(event,options,srcEvent){if(Baic.isString(event)){event=Baic.createEvent(event,options);}if(!Baic.isNull(srcEvent)){event.srcEvent=srcEvent;}this.forEach(function(item){item.dispatchEvent(event);});return this;}});function _getEventName(eventName){eventName=eventName.toLowerCase();return(Baic.browser.mobile?eventName:EVENTS_PC[eventName])||eventName;}function _createProxyCallback(callback,element){return function(event){event=event||window.event;if(event&&!event.target){event.target=event.srcElement;}if(callback.apply(element,[event].concat(event.data))===false){event.preventDefault();}};}})();console.timeEnd('event');console.time('browser');;(function(){'use strict';var userAgent=navigator.userAgent.toLowerCase(),msPointerEnabled=!!window.navigator.msPointerEnabled,EXPS={mobile:/iphone|android|windows phone|ipod|ipad|apple.*mobile.*safari/,ios:/iphone|ipod|ipad/,iphone:/(iphone\sos)\s([\d_]+)/,android:/(android)\s+([\d.]+)/,ipad:/(ipad).*os\s([\d_]+)/,ipod:/(ipod).*os\s([\d_]+)/,version:/.*(?:rv|chrome|webkit|version|ie)[\/: ](.+?)([ \\);]|$)/,wx:/micromessenger\/([\d\.]+)/},match;Baic.extend({browser:{touch:'ontouchstart'in window||msPointerEnabled,gesture:'ongesturestart'in window||msPointerEnabled,ios:EXPS.ios.test(userAgent),wx:EXPS.wx.test(userAgent),android:EXPS.android.test(userAgent),mobile:EXPS.mobile.test(userAgent),version:(userAgent.match(EXPS.mobile.test(userAgent)?EXPS.mversion:EXPS.version)||[])[1]||""}});if(Baic.browser.ios){match=userAgent.match(EXPS.iphone)||userAgent.match(EXPS.ipad)||userAgent.match(EXPS.ipod);if(match)Baic.browser.version=match[2].replace(/_/g,'.');}else if(Baic.browser.android){match=userAgent.match(EXPS.android);if(match)Baic.browser.version=match[2];}if(Baic.browser.wx){Baic.browser.wxversion=(userAgent.match(EXPS.wx)||[])[1]||"0";}})();console.timeEnd('browser');console.time('animation');;(function(){'use strict';var _VENDORS=[];Baic.VENDORS.forEach(function(item){_VENDORS.unshift(item.replace(/-/g,""));});window.requestAnimationFrame=function(index,fn){while(index--&&!(fn=window[(_VENDORS[index]+"RequestAnimationFrame").firstLowerCase()])){}return fn||function(callback){setTimeout(callback,15);};}(_VENDORS.length);window.cancelAnimationFrame=function(index,fn){while(index--&&!(fn=window[(_VENDORS[index]+"CancelAnimationFrame").firstLowerCase()]||window[(_VENDORS[index]+"CancelRequestAnimationFrame").firstLowerCase()])){}return fn||clearTimeout;}(_VENDORS.length);Baic.extend({easing:{linear:function linear(n){return n;},//由慢到快
cubicIn:function cubicIn(n){return Math.pow(n,3);},//由快到慢
cubicOut:function cubicOut(n){return Math.pow(n-1,3)+1;},//球体跳动运动轨道
easeOutBounce:function easeOutBounce(n){if(n<1/2.75){return 7.5625*n*n;}else if(n<2/2.75){return 7.5625*(n-=1.5/2.75)*n+0.75;}else if(n<2.5/2.75){return 7.5625*(n-=2.25/2.75)*n+0.9375;}else{return 7.5625*(n-=2.625/2.75)*n+0.984375;}},//由快到匀速到快
quadInOut:function quadInOut(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return-1*(--n*(n-2)-1)/2;}},Animator:function Animator(options){return new _Animator(options);}});var _Animator=function _Animator(options){Baic.extend(_Animator.prototype,options);};Baic.extend(_Animator.prototype,{duration:350,startValue:0,endValue:1,reversed:false,easing:Baic.easing.linear,onStep:Baic.nop,onStop:Baic.nop,onEnd:Baic.nop,start:function start(){_cancel(this);this.starttime=this.frametime=Date.now();this.value=this.startValue;this._Animation=window.requestAnimationFrame(_next.bind(this));},stop:function stop(){_cancel(this);this.onStop();}});function _cancel(obj){window.cancelAnimationFrame(obj._Animation);obj._Animation=null;}function _next(){this.frametime=Date.now();this.dt=this.frametime-this.starttime;var num=_easing(this.starttime,this.duration,this.easing,this.reversed);if(num>=1||this.dt>=this.duration){this.value=this.endValue;_cancel(this);this.onStep();this.onEnd();}else{this._Animation=window.requestAnimationFrame(_next.bind(this));this.value=this.startValue+num*(this.endValue-this.startValue);this.onStep();}}function _easing(starttime,duration,easing,reversed){var frame=(Date.now()-starttime)/duration;if(reversed){return frame>=1?0:1-easing(1-frame);}else{return frame>=1?1:easing(frame);}}})();console.timeEnd('animation');console.time('ajax');;(function(){'use strict';var _AJAX_DEFAULTS={TYPE:'GET',MIME:'json'};var _AJAX_MIME_TYPES={script:'text/javascript, application/javascript',json:'application/json',xml:'application/xml, text/xml',html:'text/html',text:'text/plain'};var _AJAX_OPTIONS={// url: '',                // URL
type:_AJAX_DEFAULTS.TYPE,// 请求方法: GET | POST | PUT | DELETE 等
async:true,// 是否异步调用
success:Baic.nop,// 成功响应的callback函数
error:Baic.nop,// 失败或错误的callback函数
context:null,// callback函数的上下文对象
dataType:_AJAX_DEFAULTS.MIME,// 返回数据的类型: json | xml | text
headers:{},// 头信息
timeout:0,// 超时时间
xhr:function xhr(){// 获取 XHR 对象
return new window.XMLHttpRequest();}};var JSONP_ID=0;var abortTimeout;Baic.extend({AJAX_DEFAULTS:_AJAX_DEFAULTS,AJAX_OPTIONS:_AJAX_OPTIONS,AJAX_MIME_TYPES:_AJAX_MIME_TYPES,ajax:function ajax(options){return new Promise(function(resolve,reject){options=Baic.extend({_resolve:resolve,_reject:reject},Baic.AJAX_OPTIONS,options);var xhr=options.xhr();if(options.data){if(options.type===Baic.AJAX_DEFAULTS.TYPE){options.url+=Baic.queryString(options.data,options.url.indexOf('?')<0?'?':'&');}else{options.data=Baic.queryString(options.data);}}if(options.url.indexOf("=?")>=0){return Baic.jsonp(options);}xhr.onreadystatechange=function(){if(xhr.readyState===4){abortTimeout&&abortTimeout.cancel();_xhrStatus(xhr,options);}};xhr.open(options.type,options.url,options.async);if(options.contentType){options.headers['Content-Type']=options.contentType;}if(options.dataType){options.headers['Accept']=Baic.AJAX_MIME_TYPES[options.dataType];}for(var key in options.headers){if(Baic.hasOwn(options.headers,key)){xhr.setRequestHeader(key,options.headers[key]);}}if(options.timeout>0){abortTimeout=_xhrTimeout.defer(options.timeout,xhr,options);}try{xhr.send(options.data);}catch(error){_xhrError('Resource not found',xhr=error,options);}});},jsonp:function jsonp(options){if(options.async){var callbackName="jsonp"+ ++JSONP_ID;var script=document.createElement("script");var xhr={abort:function abort(){Baic(script).remove();if(callbackName in window){delete window[callbackName];}}};window[callbackName]=function(response){clearTimeout(abortTimeout);xhr.abort();_xhrSuccess(response,xhr,options);};script.src=options.url.replace(/=\?/,'='+callbackName);Baic('head').append(script);if(options.timeout>0){abortTimeout=setTimeout(_xhrTimeout,options.timeout,xhr,options);}return xhr;}else{return console.error('Unable to make jsonp synchronous call.');}},get:function get(url,data,success,dataType){if(Baic.isFunction(data)){dataType=success;success=data;data=null;}return Baic.ajax({url:url,data:data,success:success,dataType:dataType});},post:function post(url,data,success,dataType){if(Baic.isFunction(data)){dataType=success;success=data;data=null;}return _xhrForm.call(this,'POST',url,data,success,dataType);},put:function put(url,data,success,dataType){if(Baic.isFunction(data)){dataType=success;success=data;data=null;}return _xhrForm.call(this,'PUT',url,data,success,dataType);},json:function json(url,data,success){return Baic.ajax({url:url,data:data,success:success,dataType:_AJAX_DEFAULTS.MIME});},delete:function _delete(url,data,success,dataType){if(Baic.isFunction(data)){dataType=success;success=data;data=null;}return _xhrForm.call(this,'DELETE',url,data,success,dataType);},queryString:function queryString(obj,prefix){if(Baic.isJSON(obj)){prefix=prefix||'';var serialize=prefix;var key;for(key in obj){if(!Baic.isUndefined(key)&&Baic.hasOwn(obj,key)){if(serialize!==prefix){serialize+='&';}serialize+=key+'='+encodeURIComponent(obj[key]);}}return serialize===prefix?'':serialize;}else{var query={};var isUrl=/^(https?\:\/\/|\.\/|\.\.\/)/i.test(obj);var search=location.search.slice(1);(isUrl?obj.split('?')[1]:search).split('&').forEach(function(item){var parts=item.split('=');if(parts[0])query[parts[0]]=decodeURIComponent(parts[1]);});return obj?isUrl?query:query[obj]:query;}}});function _xhrForm(method,url,data,success,dataType){return Baic.ajax({type:method,url:url,data:data,success:success,dataType:dataType,contentType:'application/x-www-form-urlencoded'});}function _xhrStatus(xhr,options){if(xhr.status>=200&&xhr.status<300||xhr.status===0){if(options.async){_xhrSuccess(_parseResponse(xhr,options),xhr,options);}}else{_xhrError('Unsuccesful request',xhr,options);}}function _xhrSuccess(response,xhr,options){if(response instanceof Error){_xhrError(response.message,response,options);}else{options.success.call(options.context,response,xhr,options);options._resolve(response,xhr,options);delete options._resolve;delete options._reject;}}function _xhrError(type,xhr,options){options.error.call(options.context,type,xhr,options);options._reject(response,xhr,options);delete options._resolve;delete options._reject;}function _xhrTimeout(xhr,options){xhr.onreadystatechange={};xhr.abort();_xhrError('Timeout exceeded',xhr,options);}function _parseResponse(xhr,options){var response=xhr.responseText;if(response){if(options.dataType===Baic.AJAX_DEFAULTS.MIME){try{response=JSON.parse(response);}catch(error){response=error;_xhrError('Parse Error',xhr,options);}}else if(options.dataType==='xml'){response=xhr.responseXML;}}return response;}})();console.timeEnd('ajax');